webpackJsonp([32],{40:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){var a={};for(var l in e)t.indexOf(l)>=0||Object.prototype.hasOwnProperty.call(e,l)&&(a[l]=e[l]);return a}Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxGroup=t.Checkbox=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},o=a(1),u=l(o);t.Checkbox=u.default.createClass({displayName:"Checkbox",contextTypes:{checkboxGroup:u.default.PropTypes.object.isRequired},componentWillMount:function(){if(!this.context||!this.context.checkboxGroup)throw new Error("The `Checkbox` component must be used as a child of `CheckboxGroup`.")},render:function(){var e=this.context.checkboxGroup,t=e.name,a=e.checkedValues,l=e.onChange,n={};return a&&(n.checked=a.indexOf(this.props.value)>=0),"function"==typeof l&&(n.onChange=l.bind(null,this.props.value)),u.default.createElement("input",r({},this.props,{type:"checkbox",name:t},n))}}),t.CheckboxGroup=u.default.createClass({displayName:"CheckboxGroup",propTypes:{name:o.PropTypes.string,defaultValue:o.PropTypes.array,value:o.PropTypes.array,onChange:o.PropTypes.func,children:o.PropTypes.node.isRequired,Component:o.PropTypes.oneOfType([o.PropTypes.string,o.PropTypes.func,o.PropTypes.object])},getDefaultProps:function(){return{Component:"div"}},childContextTypes:{checkboxGroup:u.default.PropTypes.object},getChildContext:function(){return{checkboxGroup:{name:this.props.name,checkedValues:this.state.value,onChange:this._onCheckboxChange}}},getInitialState:function(){return{value:this.props.value||this.props.defaultValue||[]}},componentWillReceiveProps:function(e){e.value&&this.setState({value:e.value})},render:function(){var e=this.props,t=e.Component,a=(e.name,e.value,e.onChange,e.children),l=n(e,["Component","name","value","onChange","children"]);return u.default.createElement(t,l,a)},getValue:function(){return this.state.value},_isControlledComponent:function(){return!!this.props.value},_onCheckboxChange:function(e,t){var a;a=t.target.checked?this.state.value.concat(e):this.state.value.filter(function(t){return t!==e}),this._isControlledComponent()?this.setState({value:this.props.value}):this.setState({value:a}),"function"==typeof this.props.onChange&&this.props.onChange(a)}})},422:function(e,t,a){try{(function(){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),u=function(e,t,a){for(var l=!0;l;){var n=e,r=t,o=a;l=!1,null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,r);if(void 0!==u){if("value"in u)return u.value;var i=u.get;if(void 0===i)return;return i.call(o)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=r,a=o,l=!0,u=s=void 0}},i=a(1),s=l(i),c=a(2),d=a(5),p=function(e){function t(e){n(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this)}return r(t,e),o(t,[{key:"confirm",value:function(){var e,t,a,l,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.close,a=e.archive,l=e.data,t(),r.next=7,regeneratorRuntime.awrap(a(l.id));case 7:n=r.sent,0===n?d.notify.show("项目已归档。","success",2e3):d.notify.show("归档失败。","error",2e3);case 9:case"end":return r.stop()}},null,this)}},{key:"cancel",value:function(){var e=this.props.close;e()}},{key:"render",value:function(){var e=this.props.data;return s.default.createElement(c.Modal,{show:!0,onHide:this.cancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},s.default.createElement(c.Modal.Header,{closeButton:!0,style:{background:"#f0f0f0",height:"50px"}},s.default.createElement(c.Modal.Title,{id:"contained-modal-title-la"},"项目归档")),s.default.createElement(c.Modal.Body,null,"归档后项目将变成完全只读。",s.default.createElement("br",null),"确认要将【",e.name,"】此项目归档？"),s.default.createElement(c.Modal.Footer,null,s.default.createElement(c.Button,{onClick:this.confirm},"确定"),s.default.createElement(c.Button,{bsStyle:"link",onClick:this.cancel},"取消")))}}],[{key:"propTypes",value:{close:i.PropTypes.func.isRequired,archive:i.PropTypes.func.isRequired,data:i.PropTypes.object.isRequired},enumerable:!0}]),t}(i.Component);t.default=p,e.exports=t.default}).call(this)}finally{}},423:function(e,t,a){try{(function(){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),i=function(e,t,a){for(var l=!0;l;){var n=e,r=t,o=a;l=!1,null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,r);if(void 0!==u){if("value"in u)return u.value;var i=u.get;if(void 0===i)return;return i.call(o)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=r,a=o,l=!0,u=s=void 0}},s=a(1),c=l(s),d=a(8),p=a(2),f=a(7),m=l(f),y=a(3),h=l(y),E=a(38),v=l(E),b=a(5),k=a(4),g=function(e,t){var a={};return e.name||(a.name="必填"),e.principal||(a.principal="必填"),a},w=function(e){function t(e){n(this,a),i(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={ecode:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}r(t,e),u(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.initializeForm,a=e.data;t(a)}},{key:"searchUsers",value:function(e){var t,a;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:if(e=e.toLowerCase()){l.next=3;break}return l.abrupt("return",{options:[]});case 3:return t=new v.default,l.next=6,regeneratorRuntime.awrap(t.request({url:"/user/search?s="+e}));case 6:return a=l.sent,l.abrupt("return",{options:h.default.map(a.data,function(e){return e.name=e.name+"("+e.email+")",e})});case 8:case"end":return l.stop()}},null,this)}},{key:"handleSubmit",value:function(){var e,t,a,l,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.values,a=e.update,l=e.close,r.next=6,regeneratorRuntime.awrap(a(t.id,h.default.extend({},h.default.omit(t,["id"]),{principal:t.principal&&t.principal.id||""})));case 6:n=r.sent,0===n?(this.setState({ecode:0}),l(),b.notify.show("项目已更新。","success",2e3)):this.setState({ecode:n});case 8:case"end":return r.stop()}},null,this)}},{key:"handleCancel",value:function(){var e=this.props,t=e.close,a=e.submitting;a||(this.setState({ecode:0}),t())}},{key:"render",value:function(){var e=this.props,t=e.i18n.errMsg,a=e.fields,l=a.id,n=a.name,r=a.principal,u=a.description,i=e.handleSubmit,s=e.invalid,d=e.dirty,f=e.submitting,y=e.data;return c.default.createElement(p.Modal,{show:!0,onHide:this.handleCancel,backdrop:"static","aria-labelledby":"contained-modal-title-sm"},c.default.createElement(p.Modal.Header,{closeButton:!0,style:{background:"#f0f0f0",height:"50px"}},c.default.createElement(p.Modal.Title,{id:"contained-modal-title-la"},"编辑项目 - "+y.name)),c.default.createElement("form",{onSubmit:i(this.handleSubmit),onKeyDown:function(e){13==e.keyCode&&e.preventDefault()}},c.default.createElement(p.Modal.Body,null,c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:n.touched&&n.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"名称"),c.default.createElement(p.FormControl,o({type:"hidden"},l)),c.default.createElement(p.FormControl,o({disabled:f,type:"text"},n,{placeholder:"问题状态名"})),n.touched&&n.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},n.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsText",validationState:r.touched&&r.error?"error":null},c.default.createElement(p.ControlLabel,null,c.default.createElement("span",{className:"txt-impt"},"*"),"责任人"),c.default.createElement(m.default.Async,{clearable:!1,disabled:f,options:[],value:r.value,onChange:function(e){r.onChange(e)},valueKey:"id",labelKey:"name",loadOptions:this.searchUsers.bind(this),placeholder:"输入责任人"}),r.touched&&r.error&&c.default.createElement(p.HelpBlock,{style:{"float":"right"}},r.error)),c.default.createElement(p.FormGroup,{controlId:"formControlsText"},c.default.createElement(p.ControlLabel,null,"描述"),c.default.createElement(p.FormControl,o({disabled:f,type:"text"},u,{placeholder:"状态描述"})))),c.default.createElement(p.Modal.Footer,null,c.default.createElement("span",{className:"ralign"},0!==this.state.ecode&&!f&&t[this.state.ecode]),c.default.createElement("img",{src:k,className:f?"loading":"hide"}),c.default.createElement(p.Button,{disabled:!d||f||s,type:"submit"},"确定"),c.default.createElement(p.Button,{bsStyle:"link",disabled:f,onClick:this.handleCancel},"取消"))))}}],[{key:"propTypes",value:{i18n:s.PropTypes.object.isRequired,submitting:s.PropTypes.bool,invalid:s.PropTypes.bool,dirty:s.PropTypes.bool,values:s.PropTypes.object,fields:s.PropTypes.object,handleSubmit:s.PropTypes.func.isRequired,close:s.PropTypes.func.isRequired,data:s.PropTypes.object.isRequired,initializeForm:s.PropTypes.func.isRequired,update:s.PropTypes.func.isRequired},enumerable:!0}]);var a=t;return t=(0,d.reduxForm)({form:"project",fields:["id","name","principal","description"],validate:g})(t)||t}(s.Component);t.default=w,e.exports=t.default}).call(this)}finally{}},2004:function(e,t,a){try{(function(){"use strict";function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{actions:(0,m.bindActionCreators)(h,e),projectActions:(0,m.bindActionCreators)(v,e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),c=function(e,t,a){for(var l=!0;l;){var n=e,r=t,o=a;l=!1,null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,r);if(void 0!==u){if("value"in u)return u.value;var i=u.get;if(void 0===i)return;return i.call(o)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=r,a=o,l=!0,u=s=void 0}},d=a(1),p=n(d),f=a(21),m=a(22),y=a(2087),h=l(y),E=a(339),v=l(E),b=a(2005),k=function(e){function t(e){r(this,a),c(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.pid=""}o(t,e),s(t,[{key:"index",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.props.actions.index(this.pid));case 2:return e.abrupt("return",this.props.summary.ecode);case 3:case"end":return e.stop()}},null,this)}},{key:"archive",value:function(e){var t;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.projectActions,a.next=3,regeneratorRuntime.awrap(t.archive(e));case 3:return a.abrupt("return",this.props.project.ecode);case 4:case"end":return a.stop()}},null,this)}},{key:"update",value:function(e,t){var a;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:return a=this.props.projectActions,l.next=3,regeneratorRuntime.awrap(a.update(e,t));case 3:return l.abrupt("return",this.props.project.ecode);case 4:case"end":return l.stop()}},null,this)}},{key:"componentWillMount",value:function(){var e=this.props,t=e.actions,a=e.params.key;t.index(a),this.pid=a}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.actions,a=e.params.key;a!==this.pid&&(t.index(a),this.pid=a)}},{key:"render",value:function(){return p.default.createElement("div",null,p.default.createElement(b,i({i18n:this.props.i18n,layout:this.props.layout,index:this.index.bind(this),archive:this.archive.bind(this),update:this.update.bind(this),project:this.props.project.item,user:this.props.session.user},this.props.summary)))}}],[{key:"propTypes",value:{i18n:d.PropTypes.object.isRequired,actions:d.PropTypes.object.isRequired,projectActions:d.PropTypes.object.isRequired,location:d.PropTypes.object.isRequired,params:d.PropTypes.object.isRequired,layout:d.PropTypes.object.isRequired,session:d.PropTypes.object.isRequired,project:d.PropTypes.object.isRequired,summary:d.PropTypes.object.isRequired},enumerable:!0}]);var a=t;return t=(0,f.connect)(function(e){var t=e.i18n,a=e.layout,l=e.session,n=e.project,r=e.summary;return{i18n:t,layout:a,session:l,project:n,summary:r}},u)(t)||t}(d.Component);t.default=k,e.exports=t.default}).call(this)}finally{}},2005:function(e,t,a){try{(function(){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),u=function(e,t,a){for(var l=!0;l;){var n=e,r=t,o=a;l=!1,null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,r);if(void 0!==u){if("value"in u)return u.value;var i=u.get;if(void 0===i)return;return i.call(o)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=r,a=o,l=!0,u=s=void 0}},i=a(1),s=l(i),c=a(20),d=a(2),p=a(40),f=a(197),m=(a(5),a(3)),y=l(m),h=a(65),E=a(4),v=a(422),b=a(423),k=function(e){function t(e){n(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={pulseShowModel:"charts",pulseStatItems:["new","resolve","close"],assigneeShowModel:"percentage",priorityShowModel:"percentage",moduleShowModel:"percentage",editModalShow:!1,archiveNotifyShow:!1}}return r(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.i18n,l=t.layout,n=t.user,r=t.project,o=t.data,u=t.update,i=t.archive,m=t.options,k=t.loading,g={marginRight:"50px"},w=["#58ca9a","#ee706d","#f7da47","#447eff"];return k?s.default.createElement("div",{style:{marginTop:"50px",textAlign:"center"}},s.default.createElement("img",{src:E,className:"loading"})):s.default.createElement("div",{style:{marginTop:"20px",marginBottom:"30px"}},s.default.createElement("div",{className:"project-summary-header"},s.default.createElement("span",{style:{fontSize:"16px"}},r.name||"-"),s.default.createElement("span",{style:{marginLeft:"15px"}},"active"==r.status?s.default.createElement("span",{className:"project-inprogress-label"},"活动中"):s.default.createElement("span",{className:"project-close-label"},"已归档")),s.default.createElement("span",{className:"item-title"},"键值："),s.default.createElement("span",null,r.key||"-"),s.default.createElement("span",{className:"item-title"},"负责人："),s.default.createElement("span",null,r.principal&&r.principal.name||"-"),s.default.createElement("span",{className:"item-title"},"描述："),s.default.createElement("span",null,r.description||"-"),"active"==r.status&&r.principal&&r.principal.id==n.id&&s.default.createElement("span",{style:{"float":"right"}},s.default.createElement("span",{className:"project-summary-button",onClick:function(){e.setState({editModalShow:!0})},title:"编辑"},s.default.createElement("i",{className:"fa fa-edit"})),s.default.createElement("span",{className:"project-summary-button",onClick:function(){e.setState({archiveNotifyShow:!0})},title:"归档"},s.default.createElement("i",{className:"fa fa-archive"})))),o.filters&&o.filters.length>0?s.default.createElement("div",{style:{height:"160px",marginBottom:"20px",padding:"16px 0px",backgroundColor:"#f7f7f7",borderRadius:"4px",borderBottom:"1px solid #ddd"}},y.default.map(o.filters||[],function(e,t){return s.default.createElement(d.Col,{sm:3,key:t},s.default.createElement("div",{style:{padding:"30px 0px",textAlign:"center",backgroundColor:w[t],borderRadius:"4px"}},s.default.createElement("div",{style:{fontWeight:600,fontSize:"30px"}},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue"+(y.default.isEmpty(e.query)?"":"?"+h.stringify(e.query||{})),style:{color:"#fff"}},e.count)),s.default.createElement("div",{style:{fontSize:"14px",color:"#fff",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},title:e.name},e.name)))})):s.default.createElement("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f7f7f7",borderRadius:"4px",borderBottom:"1px solid #ddd"}},s.default.createElement("span",{style:g},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue"},"全部问题")),s.default.createElement("span",{style:g},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved"},"未解决的")),s.default.createElement("span",{style:g},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?assignee=me&resolution=Unresolved"},"分配给我的")),s.default.createElement("span",{style:g},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?reporter=me"},"我报告的")),s.default.createElement("span",{style:g},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?watcher=me"},"我关注的")),s.default.createElement("span",{style:g},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?created_at=-14d~"},"最近增加的")),s.default.createElement("span",{style:g},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?updated_at=-14d~"},"最近更新的")),s.default.createElement("span",{style:g},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolved_at=-14d~"},"最近解决的")),s.default.createElement("span",{style:g},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?closed_at=-14d~"},"最近关闭的"))),s.default.createElement(d.Panel,{style:{height:"320px"},header:s.default.createElement("div",null,s.default.createElement("span",null,"问题动态："+(m.twoWeeksAgo||"")+" ~ 现在"),s.default.createElement("span",{className:"exchange-icon",onClick:function(){return e.setState({pulseShowModel:"detail"==e.state.pulseShowModel?"charts":"detail"})},title:"切换"},s.default.createElement("i",{className:"fa fa-retweet"})))},"detail"==this.state.pulseShowModel&&s.default.createElement(d.Table,{responsive:!0,hover:!0},s.default.createElement("thead",null,s.default.createElement("tr",null,s.default.createElement("th",null,"日期"),y.default.map(o.trend||[],function(e,t){return s.default.createElement("th",{key:t},e.day.substr(5))}),s.default.createElement("th",null,"合计"))),s.default.createElement("tbody",null,s.default.createElement("tr",null,s.default.createElement("td",null,s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?created_at=-14d~"},"新建问题")),y.default.map(o.trend||[],function(e,t){return s.default.createElement("td",{key:t},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?created_at="+e.day+"~"+e.day},e.new))}),s.default.createElement("td",null,s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?created_at=-14d~"},y.default.reduce(o.trend||[],function(e,t){return e+t.new},0)))),s.default.createElement("tr",null,s.default.createElement("td",null,s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolved_at=-14d~"},"解决问题")),y.default.map(o.trend||[],function(e,t){return s.default.createElement("td",{key:t},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolved_at="+e.day+"~"+e.day},e.resolved))}),s.default.createElement("td",null,s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolved_at=-14d~"},y.default.reduce(o.trend||[],function(e,t){return e+t.resolved},0)))),s.default.createElement("tr",null,s.default.createElement("td",null,s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?closed_at=-14d~"},"关闭问题")),y.default.map(o.trend||[],function(e,t){return s.default.createElement("td",{key:t},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?closed_at="+e.day+"~"+e.day},e.closed))}),s.default.createElement("td",null,s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?closed_at=-14d~"},y.default.reduce(o.trend||[],function(e,t){return e+t.closed},0)))))),"charts"==this.state.pulseShowModel&&s.default.createElement("div",null,s.default.createElement(p.CheckboxGroup,{name:"statItems",value:this.state.pulseStatItems,onChange:function(t){e.setState({pulseStatItems:t})},style:{"float":"right",margin:"5px 10px 0px 0px",height:"30px"}},s.default.createElement("div",{style:{"float":"left"}},s.default.createElement("label",{style:{fontWeight:400}},s.default.createElement(p.Checkbox,{value:"new",style:{"float":"left"}}),s.default.createElement("span",{style:{marginLeft:"2px"}},"新建的"))),s.default.createElement("div",{style:{"float":"left",marginLeft:"8px"}},s.default.createElement("label",{style:{fontWeight:400}},s.default.createElement(p.Checkbox,{value:"resolve"}),s.default.createElement("span",{style:{marginLeft:"2px"}},"已解决的"))),s.default.createElement("div",{style:{"float":"left",marginLeft:"8px"}},s.default.createElement("label",{style:{fontWeight:400}},s.default.createElement(p.Checkbox,{value:"close"}),s.default.createElement("span",{style:{marginLeft:"2px"}},"已关闭的"))))),"charts"==this.state.pulseShowModel&&s.default.createElement("div",{className:"report-shape-container"},s.default.createElement(f.LineChart,{width:.95*l.containerWidth,height:200,data:o.trend||[],style:{margin:"35px auto"}},s.default.createElement(f.XAxis,{dataKey:"day"}),s.default.createElement(f.YAxis,null),s.default.createElement(f.CartesianGrid,{strokeDasharray:"3 3"}),s.default.createElement(f.Tooltip,null),s.default.createElement(f.Legend,null),this.state.pulseStatItems.indexOf("new")!==-1&&s.default.createElement(f.Line,{type:"monotone",dataKey:"new",name:"新建的",stroke:"#4572A7",fill:"#4572A7"}),this.state.pulseStatItems.indexOf("resolve")!==-1&&s.default.createElement(f.Line,{type:"monotone",dataKey:"resolved",name:"已解决的",stroke:"#89A54E",fill:"#89A54E"}),this.state.pulseStatItems.indexOf("close")!==-1&&s.default.createElement(f.Line,{type:"monotone",dataKey:"closed",name:"已关闭的",stroke:"#AA4643",fill:"#AA4643"})))),s.default.createElement(d.Panel,{header:s.default.createElement("div",null,s.default.createElement("span",null,"未解决问题：按负责人"),s.default.createElement("span",{className:"exchange-icon",onClick:function(){return e.setState({assigneeShowModel:"detail"==e.state.assigneeShowModel?"percentage":"detail"})},title:"切换"},s.default.createElement("i",{className:"fa fa-retweet"})))},o.assignee_unresolved_issues&&!y.default.isEmpty(o.assignee_unresolved_issues)?s.default.createElement(d.Table,{responsive:!0,hover:!0},"detail"==this.state.assigneeShowModel&&s.default.createElement("thead",null,s.default.createElement("tr",null,s.default.createElement("th",null,"负责人"),s.default.createElement("th",null,"问题"),y.default.map(m.types||[],function(e){return s.default.createElement("th",{key:e.id},e.name)}))),"percentage"==this.state.assigneeShowModel&&s.default.createElement("thead",null,s.default.createElement("tr",null,s.default.createElement("th",null,"负责人"),s.default.createElement("th",null,"问题"),s.default.createElement("th",null,"百分比"))),"detail"==this.state.assigneeShowModel&&s.default.createElement("tbody",null,y.default.map(o.assignee_unresolved_issues,function(e,t){return s.default.createElement("tr",{key:t},s.default.createElement("td",{style:{width:"20%"}},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&assignee="+t},m.users&&m.users[t]||"")),s.default.createElement("td",{style:{width:"10%"}},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&assignee="+t},e.total||0)),y.default.map(m.types||[],function(a){return s.default.createElement("td",{key:a.id},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&type="+a.id+"&assignee="+t},e[a.id]||0))}))})),"percentage"==this.state.assigneeShowModel&&s.default.createElement("tbody",null,y.default.map(o.assignee_unresolved_issues,function(e,t){return s.default.createElement("tr",{key:t},s.default.createElement("td",{style:{width:"20%"}},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&assignee="+t},m.users&&m.users[t]||"")),s.default.createElement("td",{style:{width:"10%"}},s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&assignee="+t},e.total||0)),s.default.createElement("td",null,s.default.createElement("table",{style:{width:"100%"}},s.default.createElement("tbody",null,s.default.createElement("tr",null,s.default.createElement("td",{style:{width:e.percent+"%"}},s.default.createElement("div",{className:"color-bar"})),s.default.createElement("td",{style:{width:100-e.percent+"%",paddingLeft:"10px"}},e.percent+"%"))))))}))):s.default.createElement("div",null,"暂无信息")),s.default.createElement(d.Panel,{header:s.default.createElement("div",null,s.default.createElement("span",null,"未解决问题：按优先级"),s.default.createElement("span",{className:"exchange-icon",onClick:function(){return e.setState({priorityShowModel:"detail"==e.state.priorityShowModel?"percentage":"detail"})},title:"切换"},s.default.createElement("i",{className:"fa fa-retweet"})))},o.priority_unresolved_issues&&!y.default.isEmpty(o.priority_unresolved_issues)?s.default.createElement(d.Table,{responsive:!0,hover:!0},"detail"==this.state.priorityShowModel&&s.default.createElement("thead",null,s.default.createElement("tr",null,s.default.createElement("th",null,"优先级"),s.default.createElement("th",null,"问题"),y.default.map(m.types||[],function(e){return s.default.createElement("th",{key:e.id},e.name)}))),"percentage"==this.state.priorityShowModel&&s.default.createElement("thead",null,s.default.createElement("tr",null,s.default.createElement("th",null,"优先级"),s.default.createElement("th",null,"问题"),s.default.createElement("th",null,"百分比"))),"detail"==this.state.priorityShowModel&&s.default.createElement("tbody",null,y.default.map(o.priority_unresolved_issues,function(e,t){return s.default.createElement("tr",{key:t},s.default.createElement("td",{style:{width:"20%"}},m.priorities&&m.priorities[t]?s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&priority="+t},m.priorities[t]):"其他"),s.default.createElement("td",{style:{width:"10%"}},m.priorities&&m.priorities[t]?s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&priority="+t},e.total||0):e.total||0),y.default.map(m.types||[],function(a){return s.default.createElement("td",{key:a.id},m.priorities&&m.priorities[t]?s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&type="+a.id+"&priority="+t},e[a.id]||0):e[a.id]||0)}))})),"percentage"==this.state.priorityShowModel&&s.default.createElement("tbody",null,y.default.map(o.priority_unresolved_issues,function(e,t){return s.default.createElement("tr",{key:t},s.default.createElement("td",{style:{width:"20%"}},m.priorities&&m.priorities[t]?s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&priority="+t},m.priorities[t]):"其他"),s.default.createElement("td",{style:{width:"10%"}},m.priorities&&m.priorities[t]?s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&priority="+t},e.total||0):e.total||0),s.default.createElement("td",null,s.default.createElement("table",{style:{width:"100%"}},s.default.createElement("tbody",null,s.default.createElement("tr",null,s.default.createElement("td",{style:{width:e.percent+"%"}},s.default.createElement("div",{className:"color-bar"})),s.default.createElement("td",{style:{width:100-e.percent+"%",paddingLeft:"10px"}},e.percent+"%"))))))}))):s.default.createElement("div",null,"暂无信息")),s.default.createElement(d.Panel,{header:s.default.createElement("div",null,s.default.createElement("span",null,"未解决问题：按模块"),s.default.createElement("span",{className:"exchange-icon",onClick:function(){return e.setState({moduleShowModel:"detail"==e.state.moduleShowModel?"percentage":"detail"})},title:"切换"},s.default.createElement("i",{className:"fa fa-retweet"})))},o.module_unresolved_issues&&!y.default.isEmpty(o.module_unresolved_issues)?s.default.createElement(d.Table,{responsive:!0,hover:!0},"detail"==this.state.moduleShowModel&&s.default.createElement("thead",null,s.default.createElement("tr",null,s.default.createElement("th",null,"模块"),s.default.createElement("th",null,"问题"),y.default.map(m.types||[],function(e){return s.default.createElement("th",{key:e.id},e.name)}))),"percentage"==this.state.moduleShowModel&&s.default.createElement("thead",null,s.default.createElement("tr",null,s.default.createElement("th",null,"模块"),s.default.createElement("th",null,"问题"),s.default.createElement("th",null,"百分比"))),"detail"==this.state.moduleShowModel&&s.default.createElement("tbody",null,y.default.map(o.module_unresolved_issues,function(e,t){return s.default.createElement("tr",{key:t},s.default.createElement("td",{style:{width:"20%"}},m.modules&&m.modules[t]?s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&module="+t},m.modules[t]):"其他"),s.default.createElement("td",{style:{width:"10%"}},m.modules&&m.modules[t]?s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&module="+t},e.total||0):e.total||0),y.default.map(m.types||[],function(a){return s.default.createElement("td",{key:a.id},m.modules&&m.modules[t]?s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&type="+a.id+"&module="+t},e[a.id]||0):e[a.id]||0)}))})),"percentage"==this.state.moduleShowModel&&s.default.createElement("tbody",null,y.default.map(o.module_unresolved_issues,function(e,t){return s.default.createElement("tr",{key:t},s.default.createElement("td",{style:{width:"20%"}},m.modules&&m.modules[t]?s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&module="+t
},m.modules[t]):"其他"),s.default.createElement("td",{style:{width:"10%"}},m.modules&&m.modules[t]?s.default.createElement(c.Link,{to:"/project/"+r.key+"/issue?resolution=Unresolved&module="+t},e.total||0):e.total||0),s.default.createElement("td",null,s.default.createElement("table",{style:{width:"100%"}},s.default.createElement("tbody",null,s.default.createElement("tr",null,s.default.createElement("td",{style:{width:e.percent+"%"}},s.default.createElement("div",{className:"color-bar"})),s.default.createElement("td",{style:{width:100-e.percent+"%",paddingLeft:"10px"}},e.percent+"%"))))))}))):s.default.createElement("div",null,"暂无信息")),this.state.editModalShow&&s.default.createElement(b,{show:!0,close:function(){e.setState({editModalShow:!1})},update:u,data:r,i18n:a}),this.state.archiveNotifyShow&&s.default.createElement(v,{show:!0,close:function(){e.setState({archiveNotifyShow:!1})},data:r,archive:i}))}}],[{key:"propTypes",value:{i18n:i.PropTypes.object.isRequired,layout:i.PropTypes.object.isRequired,user:i.PropTypes.object.isRequired,project:i.PropTypes.object.isRequired,data:i.PropTypes.object.isRequired,options:i.PropTypes.object.isRequired,loading:i.PropTypes.bool.isRequired,update:i.PropTypes.func.isRequired,archive:i.PropTypes.func.isRequired,index:i.PropTypes.func.isRequired},enumerable:!0}]),t}(i.Component);t.default=k,e.exports=t.default}).call(this)}finally{}},2087:function(e,t,a){try{(function(){"use strict";function e(e){return(0,l.asyncFuncCreator)({constant:"PROJECT_SUMMARY",promise:function(t){return t.request({url:"/project/"+e+"/summary"})}})}Object.defineProperty(t,"__esModule",{value:!0}),t.index=e;var l=a(26)}).call(this)}finally{}}});
//# sourceMappingURL=summary-1ea0ca63a4daa006cd3e.js.map